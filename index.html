<!DOCTYPE html>
<html>
<head>
  <title>PF Guard - Super Panel</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f4f8;
      padding: 20px;
      text-align: center;
    }

    h1 { color: #5A20CB; }
    input, button, select, textarea {
      padding: 10px;
      margin: 10px;
      width: 260px;
      font-size: 16px;
    }

    button {
      background-color: #5A20CB;
      color: white;
      border: none;
      cursor: pointer;
    }

    .section {
      background-color: #ffffff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 40px;
    }

    .result {
      margin-top: 20px;
    }

    .tab-btns {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background: #4b0082;
      border-radius: 8px;
      overflow: hidden;
    }

    .tab-btns button {
      flex: 1;
      padding: 12px;
      border: none;
      background: #4b0082;
      color: #fff;
      cursor: pointer;
    }

    .tab-btns button.active {
      background: #6a0dad;
    }

    .tab-content {
      display: none;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      margin-top: 10px;
    }

    .tab-content.active {
      display: block;
    }

  </style>
</head>
<body>

  <div class="section">
    <h1>PF Guard ‚Äì Compliance Checker</h1>
    <p>Enter your salary to calculate PF contributions</p>

    <input type="number" id="salary" placeholder="Enter Basic Salary (‚Çπ)">
    <br>
    <input type="number" id="actualEmployer" placeholder="Employer Share (from slip ‚Çπ)">
    <br>
    <button onclick="calculatePF()">Check PF</button>

    <div class="result" id="pfOutput"></div>
  </div>

  <div class="section">
    <h1>‚ú® Multi-Tool Panel</h1>

    <div class="tab-btns">
      <button class="active" onclick="openTab('complaint')">PF Complaint</button>
      <button onclick="openTab('slip')">Salary Slip</button>
      <button onclick="openTab('hrreport')">HR Report</button>
      <button onclick="openTab('law')">Law Info</button>
      <button onclick="openTab('chatbot')">Ask Guard</button>
    </div>

    <div id="complaint" class="tab-content active">
      <h2>üõ°Ô∏è PF Complaint Generator</h2>
      <input id="name" placeholder="Your Name" />
      <input id="company" placeholder="Company Name" />
      <input id="uan" placeholder="UAN Number" />
      <input id="salary2" placeholder="Salary" />
      <select id="issue">
        <option>PF cut ho raha par employer share nahi de raha</option>
        <option>PF suddenly band ho gaya</option>
        <option>Naya employee hoon, PF nahi mila</option>
      </select>
      <textarea id="extra" placeholder="Extra notes (optional)"></textarea>
      <button class="action" onclick="generateComplaint()">Download Complaint PDF</button>
    </div>

    <div id="slip" class="tab-content">
      <h2>üìÇ Salary Slip Upload Checker</h2>
      <input type="file" id="salarySlip" accept=".txt,.pdf,.doc" />
      <button class="action" onclick="checkSlip()">Check PF Word</button>
      <p id="slipResult"></p>
    </div>

    <div id="hrreport" class="tab-content">
      <h2>üïµÔ∏è Anonymous HR Report</h2>
      <input id="hrname" placeholder="HR ka Naam (optional)" />
      <textarea id="hrreason" placeholder="Complaint reason"></textarea>
      <button class="action" onclick="fakeAlert()">Send Anonymous Report</button>
    </div>

    <div id="law" class="tab-content">
      <h2>üìò Law Section - EPF Explained</h2>
      <ul>
        <li><strong>Section 6:</strong> Employer + Employee = 12% + 12%</li>
        <li><strong>Section 12:</strong> No deduction without share</li>
        <li><strong>15,000 Rule:</strong> Salary above ‚Çπ15,000 = optional PF</li>
      </ul>
    </div>

    <div id="chatbot" class="tab-content">
      <h2>ü§ñ Ask PF Guard</h2>
      <input id="userQ" placeholder="Ask a question..." />
      <button class="action" onclick="chatBotReply()">Ask</button>
      <p id="chatAnswer"></p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function calculatePF() {
      let salary = parseFloat(document.getElementById("salary").value);
      let employerGiven = parseFloat(document.getElementById("actualEmployer").value);

      if (!salary || !employerGiven) {
        alert("Please enter all details correctly.");
        return;
      }

      let empShare = salary * 0.12;
      let expectedEmployerShare = salary * 0.12;
      let difference = expectedEmployerShare - employerGiven;

      let message = `
        <strong>Employee Share:</strong> ‚Çπ${empShare.toFixed(2)}<br>
        <strong>Expected Employer Share:</strong> ‚Çπ${expectedEmployerShare.toFixed(2)}<br>
        <strong>Given by Employer:</strong> ‚Çπ${employerGiven.toFixed(2)}<br>
        <strong>Difference:</strong> ‚Çπ${difference.toFixed(2)}<br><br>
      `;

      if (difference > 0.1) {
        message += "<span style='color:red;'>‚ùå Your employer may be underpaying PF.</span>";
      } else {
        message += "<span style='color:green;'>‚úÖ PF seems correct. You're safe!</span>";
      }

      document.getElementById("pfOutput").innerHTML = message;
    }

    function openTab(tab) {
      document.querySelectorAll('.tab-btns button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
      document.querySelector(`[onclick="openTab('${tab}')"]`).classList.add('active');
      document.getElementById(tab).classList.add('active');
    }

    async function generateComplaint() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const n = document.getElementById('name').value;
      const c = document.getElementById('company').value;
      const u = document.getElementById('uan').value;
      const s = document.getElementById('salary2').value;
      const i = document.getElementById('issue').value;
      const e = document.getElementById('extra').value;

      const complaint = `To EPFO,\n\nI, ${n}, employee of ${c}, UAN ${u}, salary ‚Çπ${s}, would like to raise complaint: ${i}.\n\n${e}\n\nPlease investigate.\n\nThanks.`;
      doc.text(complaint, 10, 10);
      doc.save("PF_Complaint.pdf");
    }

    function checkSlip() {
      const file = document.getElementById("salarySlip").files[0];
      if (!file) return alert("Upload a file");
      const reader = new FileReader();
      reader.onload = function(e) {
        const text = e.target.result;
        document.getElementById("slipResult").innerText =
          text.toLowerCase().includes("pf") ? "‚úÖ PF word found in salary slip." : "‚ùå PF word not found.";
      };
      reader.readAsText(file);
    }

    function fakeAlert() {
      const h = document.getElementById("hrname").value;
      const r = document.getElementById("hrreason").value;
      alert(`‚úÖ Anonymous Report Sent for ${h || "Unnamed HR"}: ${r}`);
    }

    function chatBotReply() {
      const q = document.getElementById("userQ").value.toLowerCase();
      let a = "I am still learning. Try asking about PF limit or EPF rules.";
      if (q.includes("limit")) a = "PF limit is ‚Çπ15,000 basic salary. Above that it's optional.";
      else if (q.includes("share")) a = "Employer and employee both contribute 12% under EPF.";
      document.getElementById("chatAnswer").innerText = a;
    }
  </script>

</body>
</html>
